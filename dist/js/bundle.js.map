{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap c9926cb208d3e230e762","webpack:///./client/js/Detector.js","webpack:///./client/js/Fisheye.js","webpack:///./client/js/languageStrings.js","webpack:///./~/tween.js/src/Tween.js","webpack:///./~/process/browser.js","webpack:///./client/js/main.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Detector","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","width","margin","this","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","circular","fisheye","dx","x","focus","dy","y","dd","Math","sqrt","radius","z","k","k0","exp","k1","min","rescale","distortion","_","arguments","length","en","loading","what","hidehidemebuttoncopy","description","no","process","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","TWEEN","_tweens","getAll","removeAll","add","tween","push","remove","indexOf","splice","update","time","preserve","now","hrtime","performance","bind","Date","getTime","Tween","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","to","properties","duration","start","Array","concat","stop","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","onStart","callback","onUpdate","onComplete","onStop","elapsed","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","pow","Circular","Elastic","Back","Bounce","v","f","floor","fn","Utils","Bezier","b","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","t3","root","apply","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","init","container","getElementById","renderer","THREE","WebGLRenderer","antialias","alpha","logarithmicDepthBuffer","context","getSupportedExtensions","textureFormat","CanvasRenderer","isCanvas","mosaics","canvas_mosaics","setClearColor","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","domElement","numberWorks","xCoords","collection","map","embedding_x","yCoords","embedding_y","sort","lowPercentile","hiPercentile","collectionWidth","collectionHeight","maxX","minX","maxY","minY","tileSize","feD","feR","Fisheye","maxFisheyeZ","z_scaler","fov","calcNeededFov","aspect","perspectiveScale","tan","minTouchDist","minFisheyeDist","camera","PerspectiveCamera","position","scene","Scene","lookupWork","queryStrings","markedWork","workMarkerPosition","Vector3","singleGeometry","Geometry","area","scaling","plane","PlaneGeometry","planeMesh","Mesh","updateMatrix","merge","geometry","matrix","loadGeometry","materials","totalVertices","numTextures","mw","mosaicWidth","tSize","pDim","pixelWidth","j","tiles","left","upper","right","lower","coords","Vector2","faceVertexUvs","faces","materialIndex","MeshBasicMaterial","textures","overdraw","multimaterial","MultiMaterial","BufferGeometry","fromGeometry","workMarkerMaterial","transparent","opacity","workMarkerGeom","CircleGeometry","workMarker","set","mesh","animate","texturesLoaded","jpgTextureLoader","textureLoaders","textureLoader","texture","load","dataPath","image","flipY","raycaster","Raycaster","mouse","controls","TrackballControls","minDistance","maxDistance","noRotate","noMouseZoom","panSpeed","staticMoving","enabled","maxPanX","minPanX","maxPanY","minPanY","unprojectZ","addEventListener","onWindowResize","onWebGLMouseDown","event","clientX","clientY","mouse_down_init_position","onWebGLMouseUp","autoZoomed","old_x","old_y","distance","currentIntersectFace","work_id","identifier","work_url","replace","open","updateProjectionMatrix","handleResize","onMouseOut","autoPanVec","onDocumentMouseMove","preventDefault","isTouch","ismousedown","autoPan","recalculateFishEye","vector","unproject","sub","normalize","clone","multiplyScalar","x_coords","y_coords","fisheye_trans","x_size","y_size","x_offset","y_offset","x_pos","y_pos","z_pos","attributes","setXYZ","needsUpdate","scale","mouseVec","mouseVecLength","autoPanStart","autoPanStop","onTouchStart","onTouchMove","touchMove","onTouchEnd","changedTouches","pageX","pageY","previousFace","updateTileInfo","metadata","artist","yearstring","onLinkTouchEnd","stopPropagation","temp","scaledVec","speed","new_x","target","new_y","addVectors","requestAnimationFrame","render","setFromCamera","intersects","intersectObject","face_index","face","display","setAttribute","setZ","getZ","getHighResImage","removeHighResImage","firstRender","onMouseWheel","onUIZoomIn","onUIZoomOut","onUIReset","localStorage","setItem","workIndex","workCoords","autoZoom","index","index_str","substring","hiResTexture","material","uv","setXY","mosaicIndex","clearGroups","mosaicStart","splitLength","addGroup","groupsNeedUpdate","highResImageIndex","dispose","factor","mX","mY","move","setLength","deltaY","detail","subVectors","zoomIn","zoomOut","reset","height","dist","widthfov","atan","heightfov","loadScripts","url","onSuccess","el","src","onload","showInfo","classList","languageStrings","ImageUtils","crossOrigin","Infinity","language","s3tc","DDSLoader","pvrtc","PVRLoader","jpg","TextureLoader","split","decodeURIComponent","location","search","substr","tweenVars","preferredLanguage","navigator","languages","userLanguage","even"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/js\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nmodule.exports = Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\nmodule.exports = Detector;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    circular: function() {\n      var radius = 200,\n          distortion = 2,\n          k0,\n          k1,\n          focus = [0, 0];\n\n      function fisheye(d) {\n        var dx = d.x - focus[0],\n            dy = d.y - focus[1],\n            dd = Math.sqrt(dx * dx + dy * dy);\n        dd += 1e-9; // small offset to avoid divide-by-zero\n        if (!dd || dd >= radius) return {x: d.x, y: d.y, z: dd >= radius ? 1 : 10};\n        var k = k0 * (1 - Math.exp(-dd * k1)) / dd * .75 + .25;\n        return {\n          x: (focus[0] + dx * k),\n          y: (focus[1] + dy * k),\n          z: Math.min(k, 10)\n        };\n      }\n\n      function rescale() {\n        k0 = Math.exp(distortion);\n        k0 = k0 / (k0 - 1) * radius;\n        k1 = distortion / radius;\n        return fisheye;\n      }\n\n      fisheye.radius = function(_) {\n        if (!arguments.length) return radius;\n        radius = +_;\n        return rescale();\n      };\n\n      fisheye.distortion = function(_) {\n        if (!arguments.length) return distortion;\n        distortion = +_;\n        return rescale();\n      };\n\n      fisheye.focus = function(_) {\n        if (!arguments.length) return focus;\n        focus = _;\n        return fisheye;\n      };\n\n      return rescale();\n    }\n  };\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\n\nmodule.exports = {\n  en: {\n    loading: 'Please wait, loading images…',\n    what: 'What\\'s this?',\n    hidehidemebuttoncopy: 'OK',\n    description: 'This page gives you a map of the entire collection. Artworks have been grouped by similarity. It works like a map so you can zoom in to look at single works. \\\n      <h2>What am I looking at?</h2> \\\n      <p>\\\n      We trained an algorithm to identify similarities between works and built an interface to display how it groups the images. We hope it helps you in finding new ways of exploring and seeing the collections.\\\n      </p><p>\\\n      The project received support from <a href=\"http://www.kulturradet.no/english\">The Arts Council Norway</a> and is a collaboration between the Section for Digital Collection Management at the National Museum, <a href=\"http://www.auduno.com/\">Audun Mathias Øygard</a> and <a href=\"http://bengler.no\">Bengler</a>.\\\n      </p><p>\\\n      <a href=\"https://github.com/bengler/propinquity\">GitHub</a>\\\n      </p>\\\n      '\n  },\n  no: {\n    loading: 'Vennligst vent, bildene laster…',\n    hidehidemebuttoncopy: 'Greit',\n    what: 'Hva er dette?',\n    description: 'Her får du utsikt over hele samlingen i ett bilde. Vi har gruppert kunst med likhetstrekk og lar deg se samlingen fugleperspektiv. Samtidig kan du zoome inn på detaljer i enkeltverk hvis du ønsker. \\\n      <h2>Hva er dette?</h2> \\\n      Vi spurte oss selv: kan vi trene opp en algoritme til å se likheter i samlingen vår og bruke det til å gi bedre oversikt? \\\n      \\\n      Ved hjelp av maskinlæring viser vi her algoritmens klassifisering av bildene våre etter likheter i motiv og stil. Vi håper dere vil ha nytte av en ny innfallsvinkel til kunsten på nettsidene våre og at visningen oppfordrer publikum til nye oppdagelsesferder i samlingene.\\\n      \\\n      Prosjektet er støttet av <a href=\"\">Norsk kulturråd</> og utført av seksjon Digital Samlingsforvaltning på Nasjonalmuseet i samarbeid med <a href=\"http://www.auduno.com/\">Audun Mathias Øygard</a> og <a href=\"http://bengler.no\">Bengler</a>. Tematisk ligger arbeidet mellom konvensjonell kunsthistorietenkning og robotikk: to teoretiske retninger som tradisjonelt sett ligger langt fra hverandre.'\n  }\n}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(process) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function () {\n\n\t\t\treturn _tweens;\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\t_tweens = [];\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\t_tweens.push(tween);\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n})();\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.performance.now.bind(window.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\n\t};\n\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (true) {\n\n\t\t// AMD\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t\t\treturn TWEEN;\n\t\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(4)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar TWEEN = __webpack_require__(3)\n\nvar Fisheye = __webpack_require__(1)\nvar detector = __webpack_require__(0)\n\nvar languageStrings = __webpack_require__(2)\n\nvar container, stats;\n\nvar camera, scene, renderer;\n\nvar raycaster, mouse;\n\nvar controls;\n\nvar mesh, singleGeometry;\n\nvar pos;\n\nvar currentIntersectFace = -1;\n\nvar tileSize;\n\nvar fisheye;\n\nvar mouse_down_init_position;\n\nvar numberWorks = 0;\n\nvar numTextures, textureLoader, jpgTextureLoader;\n\nvar autoPanVec = -1;\nvar autoPanStart = 0.55;\nvar autoPanStop = 0.99;\n\nvar firstRender = true;\n\nvar autoZoomed = false;\n\nvar hiResTexture;\n\nvar isTouch = true;\nvar touchMove = false;\n\nTHREE.ImageUtils.crossOrigin = '';\n\nvar z_scaler = 20;\n\nvar collectionWidth, collectionHeight;\n\nvar dataPath;\n\nvar minX = minY = Infinity;\nvar maxX = maxY = -Infinity;\n\nvar minTouchDist, minFisheyeDist;\n\nvar maxFisheyeZ;\n\nvar textureFormat;\n\nvar isCanvas = false;\n\nvar workMarker, workMarkerPosition;\nvar markedWork = -1;\n\nvar language = 'en'\n\nvar textureLoaders = {\n  's3tc' : THREE.DDSLoader,\n  'pvrtc' : THREE.PVRLoader,\n  //'etc1' : THREE.DDSLoader,\n  'jpg' : THREE.TextureLoader\n}\n\nfunction init() {\n\n  container = document.getElementById( 'container' );\n\n  if ( Detector.webgl ) {\n    renderer = new THREE.WebGLRenderer( { antialias: false, alpha : true, logarithmicDepthBuffer: true  } );\n    var availableExtensions = renderer.context.getSupportedExtensions();\n\n    // If it works with VRAM constraints, prefer jpg for over-the-wire savings\n    textureFormat = \"jpg\";\n\n    // if (availableExtensions.indexOf(\"WEBGL_compressed_texture_s3tc\") > -1) textureFormat = \"s3tc\";\n    // else if (availableExtensions.indexOf(\"WEBGL_compressed_texture_pvrtc\") > -1 || availableExtensions.indexOf(\"WEBKIT_WEBGL_compressed_texture_pvrtc\") > -1) textureFormat = \"pvrtc\";\n    //else if (availableExtensions.indexOf(\"WEBGL_compressed_texture_etc1\") > -1) textureFormat = \"etc1\";\n    // else textureFormat = \"jpg\";\n  } else {\n    renderer = new THREE.CanvasRenderer( { antialias: false, alpha : true } );\n    textureFormat = \"jpg\";\n    isCanvas = true;\n    mosaics = canvas_mosaics;\n  }\n  renderer.setClearColor( 0x333333 );\n  renderer.setPixelRatio( window.devicePixelRatio );\n  renderer.setSize( window.innerWidth, window.innerHeight );\n\n  container.appendChild( renderer.domElement );\n\n  for (var i = 0;i < mosaics.length;i++) {\n    numberWorks += mosaics[i][\"tiles\"];\n  }\n\n  var xCoords = collection.map(function(e){return e.embedding_x});\n  var yCoords = collection.map(function(e){return e.embedding_y});\n  xCoords.sort(function (a,b) {return a-b;});\n  yCoords.sort(function (a,b) {return a-b;});\n  var lowPercentile = Math.floor(numberWorks*0.01);\n  var hiPercentile = Math.floor(numberWorks*0.99);\n  collectionWidth = (xCoords[hiPercentile]-xCoords[lowPercentile])*1.1;\n  collectionHeight = (yCoords[hiPercentile]-yCoords[lowPercentile])*1.1;\n  maxX = xCoords[numberWorks-1];\n  minX = xCoords[0];\n  maxY = yCoords[numberWorks-1];\n  minY = yCoords[0];\n\n  // set tilesize so that images approximately cover entire map\n  tileSize = Math.sqrt( Math.PI*Math.pow((collectionWidth+collectionHeight)/4,2) / numberWorks );\n\n  var feD = 5;\n  var feR = tileSize*10;\n  fisheye = Fisheye.circular().radius(feR).distortion(feD);\n\n  // calculate the maximum z-height of works distorted by fisheye\n  var k0 = Math.exp(feD) / (Math.exp(feD) - 1) * feR;\n  maxFisheyeZ = (k0 * (1 - Math.exp(-0.001 * feD/feR)) / 0.001 * .75 + .25) * z_scaler;\n\n  // calculate needed fov to fit all works in view\n  var fov = calcNeededFov(collectionWidth, collectionHeight);\n\n  // calculate maximum zoom\n  var aspect = window.innerWidth / window.innerHeight;\n  var perspectiveScale = tileSize / Math.tan( 0.5*fov*Math.PI/180 );\n  perspectiveScale = aspect > 1 ? perspectiveScale : (perspectiveScale/aspect);\n  minTouchDist = z_scaler + 0.564 * perspectiveScale;\n  minFisheyeDist = maxFisheyeZ + 2.336 * perspectiveScale;\n\n  //\n\n  camera = new THREE.PerspectiveCamera( fov, window.innerWidth / window.innerHeight, 10, 3500 );\n  camera.position.z = 2000;\n  scene = new THREE.Scene();\n\n  //\n\n  // mark work if specified in url\n  if (lookupWork(queryStrings['id']) !== undefined) {\n    markedWork = lookupWork(queryStrings['id']);\n    workMarkerPosition = new THREE.Vector3(collection[markedWork]['embedding_x'],collection[markedWork]['embedding_y'],z_scaler + 2.);\n  }\n\n  // create geometry and merge into one geometry\n  singleGeometry = new THREE.Geometry();\n  for (var i = 0;i < numberWorks;i++) {\n    var area = collection[i]['image_width']*collection[i]['image_height'];\n    var scaling = tileSize / Math.sqrt(area);\n    collection[i]['draw_width'] = collection[i]['image_width']*scaling;\n    collection[i]['draw_height'] = collection[i]['image_height']*scaling;\n\n    var plane = new THREE.PlaneGeometry( collection[i]['draw_width'], collection[i]['draw_height'] );\n    var planeMesh = new THREE.Mesh(plane);\n    planeMesh.position.x = collection[i]['embedding_x'];\n    planeMesh.position.y = collection[i]['embedding_y'];\n    if (markedWork == i) {\n      planeMesh.position.z = z_scaler + 2.1;\n    } else {\n      planeMesh.position.z = z_scaler + i*0.0001;\n    }\n    planeMesh.updateMatrix();\n    singleGeometry.merge(planeMesh.geometry, planeMesh.matrix);\n  }\n\n  var loadGeometry = function() {\n    var materials = [];\n    var totalVertices = 0;\n    for (var i = 0;i < numTextures;i++) {\n      // set up mapping from textures to geometry\n      var mw = mosaics[i].mosaicWidth;\n      var tSize = mosaics[i].tileSize;\n      var pDim = mosaics[i].pixelWidth;\n      for (var j = 0;j < mosaics[i].tiles;j++) {\n        var left = ((j % mw)*tSize)/pDim;\n        var upper = (Math.floor(j / mw)*tSize)/pDim;\n        var right = left + tSize/pDim;\n        var lower = upper + tSize/pDim;\n        if (isCanvas) {\n          upper = 1-upper;\n          lower = 1-lower;\n        }\n        var coords = [\n          new THREE.Vector2(left,upper),\n          new THREE.Vector2(left,lower),\n          new THREE.Vector2(right,lower),\n          new THREE.Vector2(right,upper),\n        ];\n        singleGeometry.faceVertexUvs[0][totalVertices*2] = [ coords[0], coords[1], coords[3] ];\n        singleGeometry.faceVertexUvs[0][(totalVertices*2) + 1] = [ coords[1], coords[2], coords[3] ];\n        singleGeometry.faces[totalVertices * 2].materialIndex = i;\n        singleGeometry.faces[(totalVertices*2) + 1].materialIndex = i;\n        totalVertices += 1;\n      }\n\n      materials[i] = new THREE.MeshBasicMaterial({ map : textures[i], overdraw : true });\n    }\n    materials[numTextures] = new THREE.MeshBasicMaterial({ overdraw : true });\n    var multimaterial = new THREE.MultiMaterial(materials);\n    singleGeometry = new THREE.BufferGeometry().fromGeometry(singleGeometry);\n\n    // marker of image\n    if (lookupWork(queryStrings['id']) !== undefined) {\n      var workMarkerMaterial = new THREE.MeshBasicMaterial({ color : 0xffffee, transparent : true, opacity: 0.3 ,overdraw : true });\n      var workMarkerGeom = new THREE.CircleGeometry( 1*Math.sqrt(1*tileSize*tileSize), 32 );\n      workMarker = new THREE.Mesh( workMarkerGeom, workMarkerMaterial );\n      workMarker.position.set(workMarkerPosition.x, workMarkerPosition.y, workMarkerPosition.z);\n      scene.add(workMarker);\n    }\n\n    mesh = new THREE.Mesh(singleGeometry, multimaterial);\n    scene.add(mesh);\n\n    animate();\n  }\n\n  var texturesLoaded = 0;\n  numTextures = mosaics.length;\n  var textures = [];\n  jpgTextureLoader = new textureLoaders['jpg']();\n  textureLoader = new textureLoaders[textureFormat]();\n  for (var i = 0;i < numTextures;i++) {\n    var texture = textureLoader.load(\n      dataPath + mosaics[i].image[textureFormat],\n      function(texture) {\n        texture.flipY = false;\n        texturesLoaded += 1;\n        if (texturesLoaded == numTextures) loadGeometry();\n      }\n    )\n    textures[i] = texture;\n  }\n\n  //\n\n  raycaster = new THREE.Raycaster();\n\n  mouse = new THREE.Vector2();\n\n  //\n\n  controls = new THREE.TrackballControls( camera );\n  controls.minDistance = minTouchDist;\n  controls.maxDistance = 2200;\n  controls.noRotate = true;\n  controls.noMouseZoom = true;\n  controls.panSpeed = 0.5;\n  controls.staticMoving = true;\n  controls.enabled = false;\n  controls.maxPanX = maxX;\n  controls.minPanX = minX;\n  controls.maxPanY = maxY;\n  controls.minPanY = minY;\n  controls.unprojectZ = z_scaler;\n\n  //\n\n  /*stats = new Stats();\n  stats.domElement.style.position = 'absolute';\n  stats.domElement.style.top = '0px';\n  container.appendChild( stats.domElement );*/\n\n  //\n\n  window.addEventListener( 'resize', onWindowResize, false );\n}\n\nfunction onWebGLMouseDown( event ) {\n  mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  mouse_down_init_position = [mouse.x, mouse.y];\n}\n\nfunction onWebGLMouseUp( event ) {\n  autoZoomed = false;\n\n  var x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  var y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  var old_x = mouse_down_init_position[0];\n  var old_y = mouse_down_init_position[1];\n  var distance = Math.sqrt((x-old_x)*(x-old_x) + (y-old_y)*(y-old_y));\n  if (currentIntersectFace >= 0 && distance < 0.01) {\n    var work_id = collection[currentIntersectFace].identifier;\n    var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n    window.open(work_url, '_blank');\n  }\n}\n\nfunction onWindowResize() {\n\n  camera.fov = calcNeededFov(collectionWidth, collectionHeight);\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n\n  renderer.setSize( window.innerWidth, window.innerHeight );\n\n  controls.handleResize();\n\n}\n\nfunction onMouseOut( event ) {\n  autoPanVec = -1;\n}\n\nfunction onDocumentMouseMove( event ) {\n  event.preventDefault();\n\n  if (isTouch) {\n    isTouch = false;\n    controls.unprojectZ = maxFisheyeZ;\n    controls.minDistance =  minFisheyeDist;\n  }\n\n  // Don't update when panning\n  if (controls.ismousedown) {\n    autoPanVec = -1;\n    return;\n  }\n\n  mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n\n  autoPan(mouse)\n\n  // Autopan forces fisheye update every frame anyway\n  if (autoPanVec != -1) return;\n\n  recalculateFishEye(mouse)\n}\n\nfunction recalculateFishEye(coords) {\n\n  var vector = new THREE.Vector3();\n  vector.set(coords.x, coords.y, 1)\n  vector.unproject( camera );\n\n  var dir = vector.sub( camera.position ).normalize();\n  var distance = (maxFisheyeZ - camera.position.z) / dir.z;\n\n  coords = camera.position.clone().add( dir.multiplyScalar( distance ) );\n\n  fisheye.focus([coords.x,coords.y]);\n\n  for (var i = 0;i < collection.length;i++) {\n    var x_coords = collection[i]['embedding_x'];\n    var y_coords = collection[i]['embedding_y'];\n    var fisheye_trans = fisheye({x: x_coords, y: y_coords});\n\n    var x_size = collection[i]['draw_width']/2\n    var y_size = collection[i]['draw_height']/2\n    var x_offset = x_size+((fisheye_trans.z-1)*0.7*x_size);\n    var y_offset = y_size+((fisheye_trans.z-1)*0.7*y_size);\n    var x_pos = fisheye_trans.x;\n    var y_pos = fisheye_trans.y;\n    if (markedWork == i) {\n      var z_pos = fisheye_trans.z*z_scaler + 2.1;\n    } else {\n      var z_pos = fisheye_trans.z*z_scaler + i*0.0001;\n    }\n    singleGeometry.attributes.position.setXYZ((i*6)  , x_pos-x_offset, y_pos+y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+1, x_pos-x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+2, x_pos+x_offset, y_pos+y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+3, x_pos-x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+4, x_pos+x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+5, x_pos+x_offset, y_pos+y_offset, z_pos);\n  }\n  singleGeometry.attributes.position.needsUpdate = true;\n\n  if (markedWork >= 0) {\n    // recalculate position and size of marker\n    var fisheye_trans = fisheye({x : workMarkerPosition.x, y : workMarkerPosition.y});\n    var x_size = tileSize/2;\n    var x_offset = x_size+((fisheye_trans.z-1)*0.7*x_size);\n    workMarker.scale.x = x_offset/x_size;\n    workMarker.scale.y = x_offset/x_size;\n    workMarker.position.x = fisheye_trans.x;\n    workMarker.position.y = fisheye_trans.y;\n    workMarker.position.z = fisheye_trans.z*z_scaler + 2.;\n  }\n}\n\n\nfunction autoPan(mouse) {\n\n  var mouseVec = new THREE.Vector3(mouse.x, mouse.y, 0)\n  var mouseVecLength = mouseVec.length()\n  if (mouseVecLength > autoPanStart && mouseVecLength < autoPanStop) {\n    autoPanVec = mouseVec\n  } else {\n    autoPanVec = -1\n  }\n}\n\nfunction onTouchStart( event ) {\n  if (!isTouch) {\n    isTouch = true;\n    controls.minDistance = minTouchDist;\n    controls.unprojectZ = z_scaler;\n  }\n}\n\nfunction onTouchMove( event ) {\n  touchMove = true;\n}\n\nfunction onTouchEnd( event ) {\n  event.preventDefault();\n\n  mouse.x = ( event.changedTouches[ 0 ].pageX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.changedTouches[ 0 ].pageY / window.innerHeight ) * 2 + 1;\n\n  var previousFace = currentIntersectFace;\n  if (!touchMove) {\n    updateTileInfo();\n    if (currentIntersectFace >= 0) {\n      var work_id = collection[currentIntersectFace].identifier;\n      var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n      if (currentIntersectFace == previousFace && !autoZoomed) {\n        window.open(work_url, '_blank');\n      }\n      var metadata = collection[currentIntersectFace];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <a href='\"+work_url+\n        \"' target='_blank'><em>\"+metadata.title+\"</em></a></strong>. \"+metadata.yearstring+\".</p>\";\n    }\n  }\n  if (autoZoomed) autoZoomed = false;\n  touchMove = false;\n}\n\nfunction onLinkTouchEnd( event ) {\n  event.preventDefault();\n  event.stopPropagation();\n  if (currentIntersectFace >= 0) {\n    var work_id = collection[currentIntersectFace].identifier;\n    var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n    window.open(work_url, '_blank');\n  }\n}\n\n\nfunction animate() {\n\n  if (autoPanVec != -1 && !controls.ismousedown) {\n    var temp = autoPanVec.clone();\n\n    var scaledVec = (Math.min(temp.length(), autoPanStop) - autoPanStart) / (autoPanStop - autoPanStart)\n    var speed = Math.sin(scaledVec * Math.PI) * 1.5\n\n    temp.x *= speed;\n    temp.y *= speed;\n    var new_x = controls.target.x + autoPanVec.x;\n    var new_y = controls.target.y + autoPanVec.y;\n    if (autoPanVec.x < 0 && new_x < minX) temp.x = 0;\n    if (autoPanVec.x > 0 && new_x > maxX) temp.x = 0;\n    if (autoPanVec.y < 0 && new_y < minY) temp.y = 0;\n    if (autoPanVec.y > 0 && new_y > maxY) temp.y = 0;\n    camera.position.addVectors(camera.position, temp);\n    controls.target.addVectors(controls.target, temp);\n    var mouse = {\n      x: autoPanVec.x,\n      y: autoPanVec.y\n    }\n    recalculateFishEye(mouse)\n  }\n\n  requestAnimationFrame( animate );\n  controls.update();\n\n  render();\n\n  //stats.update();\n  TWEEN.update();\n\n}\n\nfunction updateTileInfo() {\n\n  // check if pointer interacts with tile\n  raycaster.setFromCamera( mouse, camera );\n  var intersects = raycaster.intersectObject( mesh );\n\n  // updates on entering/leaving tiles\n\n  if ( intersects.length > 0 ) {\n    var face_index = Math.floor(intersects[0].face.a/6);\n\n    if (currentIntersectFace == -1) {\n      // entering tile\n      var metadata = collection[face_index];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <em>\"+metadata.title+\"</em></strong>. \"+metadata.yearstring+\".</p>\";\n      document.getElementById(\"imageinfo\").style.display = \"block\";\n      document.getElementById(\"container\").setAttribute(\"class\",\"clickable\");\n      currentIntersectFace = face_index;\n      if ( isTouch ) {\n        // raise selected tile\n        for (var i = 0;i < 6;i++) {\n          singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) + 2.0);\n        }\n        singleGeometry.attributes.position.needsUpdate = true;\n      }\n      // set timeout to avoid queuing lots of images on panning\n      setTimeout(function() {if (currentIntersectFace == face_index) getHighResImage(face_index);}, 100);\n    } else if (face_index != currentIntersectFace) {\n      // entering tile, leaving previous tile\n      var metadata = collection[face_index];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <em>\"+metadata.title+\"</em></strong>. \"+metadata.yearstring+\".</p>\";\n      removeHighResImage(currentIntersectFace);\n      if ( isTouch ) {\n        // lower previous selected tile and raise new selected tile\n        for (var i = 0;i < 6;i++) {\n          singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) - 2.0);\n          singleGeometry.attributes.position.setZ((face_index*6)+i, singleGeometry.attributes.position.getZ((face_index*6)+i) + 2.0);\n        }\n        singleGeometry.attributes.position.needsUpdate = true;\n      }\n      currentIntersectFace = face_index;\n      // set timeout to avoid queuing lots of images on panning\n      setTimeout(function() {if (currentIntersectFace == face_index) getHighResImage(face_index);}, 100);\n    }\n  } else if (currentIntersectFace != -1) {\n    // leaving tile\n    if ( isTouch ) {\n      // lower previous selected tile\n      for (var i = 0;i < 6;i++) {\n        singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) - 2.0);\n      }\n      singleGeometry.attributes.position.needsUpdate = true;\n    }\n    removeHighResImage(currentIntersectFace);\n    currentIntersectFace = -1;\n    document.getElementById(\"imageinfo\").style.display = \"none\";\n    document.getElementById(\"container\").setAttribute(\"class\",\"\");\n  }\n}\n\nfunction render() {\n\n  if (!isTouch) {\n    updateTileInfo();\n  }\n\n  renderer.render( scene, camera );\n\n  if (firstRender) {\n    document.getElementById(\"message\").style.display = \"none\";\n    renderer.domElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\n    document.addEventListener( 'mousewheel', onMouseWheel, false);\n    document.addEventListener( 'DOMMouseScroll', onMouseWheel, false); // for firefox\n    document.addEventListener( 'touchstart', onTouchStart, false);\n    renderer.domElement.addEventListener( 'touchmove', onTouchMove, false);\n    document.addEventListener( 'touchcancel', onTouchEnd, false);\n    renderer.domElement.addEventListener( 'touchend', onTouchEnd, false);\n    document.addEventListener( 'mouseout', onMouseOut, false);\n    renderer.domElement.addEventListener( 'mousedown', onWebGLMouseDown, false);\n    renderer.domElement.addEventListener( 'mouseup', onWebGLMouseUp, false);\n    document.getElementById(\"imageinfo\").addEventListener( 'touchend', onLinkTouchEnd, false);\n    document.getElementById(\"ui_zoom_in\").addEventListener(\"click\", onUIZoomIn, false);\n    document.getElementById(\"ui_zoom_in\").addEventListener(\"touchend\", onUIZoomIn, false);\n    document.getElementById(\"ui_zoom_out\").addEventListener(\"click\", onUIZoomOut, false);\n    document.getElementById(\"ui_zoom_out\").addEventListener(\"touchend\", onUIZoomOut, false);\n    document.getElementById(\"ui_reset\").addEventListener(\"click\", onUIReset, false);\n    document.getElementById(\"ui_reset\").addEventListener(\"touchend\", onUIReset, false);\n    controls.enabled = true;\n    localStorage.setItem('propinquity', 'true');\n\n    // zoom towards specific work if specified in url\n    if (queryStrings['id'] !== undefined) {\n      var workIndex = lookupWork(queryStrings['id']);\n      var workCoords = [collection[workIndex].embedding_x, collection[workIndex].embedding_y];\n      if (workCoords !== undefined) {\n        autoZoom(workCoords);\n        // lock focus until user clicks/touches\n        autoZoomed = true;\n      }\n    }\n\n    firstRender = false;\n  }\n\n}\n\nfunction getHighResImage(index) {\n  var index_str = \"\" + collection[index]['sequence_id'];\n  var image_filename = \"0000\".substring(0, 4 - index_str.length) + index_str;\n  hiResTexture = jpgTextureLoader.load(\n    'https://mm.dimu.org/image/'+collection[index]['image_id']+'?dimension=400x400',\n    //'/data/painting/images/'+image_filename+\".jpg\",\n    function (texture) {\n      if (currentIntersectFace == index) {\n        // update texture\n        mesh.material.materials[numTextures].map = texture;\n        mesh.material.materials[numTextures].needsUpdate = true;\n        mesh.material.needsUpdate = true;\n\n        // map each painting to geometry and position\n        mesh.geometry.attributes.uv.setXY((index*6)  , 0., 1.);\n        mesh.geometry.attributes.uv.setXY((index*6)+1, 0., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+2, 1., 1.);\n        mesh.geometry.attributes.uv.setXY((index*6)+3, 0., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+4, 1., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+5, 1., 1.);\n        mesh.geometry.attributes.uv.needsUpdate = true;\n\n        var mosaicIndex = Math.floor(index / mosaics[0].tiles);\n        mesh.geometry.clearGroups();\n        var mosaicStart = 0;\n        for (var i = 0;i < numTextures;i++) {\n          if (i == mosaicIndex) {\n            var splitLength = index-mosaicStart;\n            mesh.geometry.addGroup(mosaicStart*6, splitLength*6, i);\n            mesh.geometry.addGroup(index*6, 1*6, numTextures);\n            mesh.geometry.addGroup((mosaicStart+splitLength+1)*6, (mosaics[i].tiles-splitLength-1)*6, i);\n          } else {\n            mesh.geometry.addGroup(mosaicStart*6, mosaics[i].tiles*6, i);\n          }\n          mosaicStart += mosaics[i].tiles;\n        }\n        mesh.geometry.groupsNeedUpdate = true;\n\n      }\n    }\n  );\n}\n\nfunction removeHighResImage(index) {\n  highResImageIndex = -1;\n  var mosaicIndex = Math.floor(index / mosaics[0].tiles);\n  var i = index % mosaics[0].tiles;\n  var mw = mosaics[mosaicIndex].mosaicWidth;\n  var tSize = mosaics[mosaicIndex].tileSize;\n  var pDim = mosaics[mosaicIndex].pixelWidth;\n\n  var left = ((i % mw)*tSize)/pDim;\n  var upper = (Math.floor(i / mw)*tSize)/pDim;\n  var right = left + tSize/pDim;\n  var lower = upper + tSize/pDim;\n  if (isCanvas) {\n    upper = 1-upper;\n    lower = 1-lower;\n  }\n\n  mesh.geometry.clearGroups();\n  var mosaicStart = 0\n  for (var i = 0;i < mosaics.length;i++) {\n    mesh.geometry.addGroup(mosaicStart*6, mosaics[i].tiles*6, i);\n    mosaicStart += mosaics[i].tiles;\n  }\n  mesh.geometry.groupsNeedUpdate = true;\n\n  mesh.geometry.attributes.uv.setXY((index*6)  , left, upper);\n  mesh.geometry.attributes.uv.setXY((index*6)+1, left, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+2, right, upper);\n  mesh.geometry.attributes.uv.setXY((index*6)+3, left, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+4, right, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+5, right, upper);\n  mesh.geometry.attributes.uv.needsUpdate = true;\n\n  if (hiResTexture) {\n    hiResTexture.dispose();\n  }\n}\n\nfunction onMouseWheel(event) {\n  var factor = 0.02;\n\n  var mX = ( event.clientX / window.innerWidth ) * 2 - 1;\n  var mY = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  var vector = new THREE.Vector3(mX, mY, 1 );\n\n  vector.unproject(camera); // gives us the true coordinates of the point\n  vector.sub(camera.position);\n  var move = vector.setLength(camera.position.length()*factor);\n  if (event.deltaY < 0 || event.detail < 0) {\n    if ((move.z + camera.position.z) < controls.minDistance) {\n      move.z = controls.minDistance - camera.position.z;\n    }\n    if (move.z < 0) {\n      camera.position.addVectors(camera.position, move);\n      move.z = 0;\n      controls.target.addVectors(controls.target, move);\n    }\n  } else {\n    if ((camera.position.z - move.z) > controls.maxDistance) {\n      move.z = camera.position.z - controls.maxDistance;\n    }\n    if (move.z < 0) {\n      camera.position.subVectors(camera.position, move);\n      move.z = 0;\n      controls.target.subVectors(controls.target, move);\n    }\n  }\n\n}\n\nfunction onUIZoomIn(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.zoomIn();\n}\n\nfunction onUIZoomOut(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.zoomOut();\n}\n\nfunction onUIReset(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.reset();\n}\n\nvar queryStrings = (function(a) {\n  if (a == \"\") return {};\n  var b = {};\n  for (var i = 0; i < a.length; ++i)\n  {\n    var p=a[i].split('=', 2);\n    if (p.length == 1)\n      b[p[0]] = \"\";\n    else\n      b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n  }\n  return b;\n})(window.location.search.substr(1).split('&'));\n\nfunction lookupWork(id) {\n  for (var i = 0;i < collection.length;i++) {\n    if (collection[i].identifier == id) {\n      return i;\n    }\n  }\n}\n\nvar autoZoom = function(coords) {\n  var tweenVars = camera.position.clone();\n  tweenVars.factor = 0;\n  var tween = new TWEEN.Tween(tweenVars)\n    .to({x : coords[0], y: coords[1], z : 320, factor : 1}, 1500)\n    .onUpdate(function() {\n      camera.position.x = this.x;\n      camera.position.y = this.y;\n      camera.position.z = this.z;\n      controls.target = new THREE.Vector3(this.x, this.y, 0);\n    })\n    .onComplete(function() {\n      // select work\n      mouse.x = 0;\n      mouse.y = 0;\n      updateTileInfo();\n    })\n  tween.easing(TWEEN.Easing.Exponential.InOut);\n  tween.delay(200);\n  tween.start();\n}\n\nfunction calcNeededFov(width, height) {\n  var dist = 2000;\n  var aspect = window.innerWidth / window.innerHeight;\n  var widthfov = 2 * Math.atan( ( width*1.1 / aspect ) / ( 2 * dist ) ) * ( 180 / Math.PI )\n  var heightfov = 2 * Math.atan( height*1.1 / ( 2 * dist ) ) * ( 180 / Math.PI );\n  var fov = (widthfov > heightfov) ? widthfov : heightfov;\n  return fov\n}\n\nfunction loadScripts(url, onSuccess) {\n  var el = document.createElement('script');\n  el.src = url;\n  el.onload = onSuccess;\n  document.body.appendChild(el);\n}\n\n// load collection and initialize\nif (queryStrings['collection'] !== undefined) {\n  dataPath = './data/'+queryStrings['collection']+'/';\n} else {\n  dataPath = './data/painting_subject/';\n}\nloadScripts(dataPath+'collection.js',init);\n\npreferredLanguage = navigator.languages\n    ? navigator.languages[0]\n    : (navigator.language || navigator.userLanguage)\n\nif (queryStrings['lang'] == 'no' || preferredLanguage == 'nb_NO' || preferredLanguage == 'nn_NO') {\n  language = 'no'\n}\n\ndocument.getElementById(\"message\").innerHTML = languageStrings[language].loading;\ndocument.getElementById(\"moreinfo\").innerHTML = languageStrings[language].description;\ndocument.getElementById(\"moreinfolink\").innerHTML = languageStrings[language].what;\ndocument.getElementById(\"hidemebutton\").innerHTML = languageStrings[language].hidehidemebuttoncopy;\n\nfunction showInfo() {\n  var el = document.getElementById(\"moreinfocontainer\");\n  el.style.display = 'block';\n  el.classList.add('showing');\n}\n\nif (true) {\n  showInfo();\n}\n\ndocument.getElementById(\"moreinfolink\").addEventListener(\"click\", function(even) {\n  showInfo();\n})\n\ndocument.getElementById(\"hidemebutton\").addEventListener(\"click\", function(event) {\n  var el = document.getElementById(\"moreinfocontainer\");\n  el.style.display = 'none';\n  el.classList.remove('showing');\n});\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c9926cb208d3e230e762","\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nmodule.exports = Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\nmodule.exports = Detector;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/Detector.js\n// module id = 0\n// module chunks = 0","module.exports = {\n    circular: function() {\n      var radius = 200,\n          distortion = 2,\n          k0,\n          k1,\n          focus = [0, 0];\n\n      function fisheye(d) {\n        var dx = d.x - focus[0],\n            dy = d.y - focus[1],\n            dd = Math.sqrt(dx * dx + dy * dy);\n        dd += 1e-9; // small offset to avoid divide-by-zero\n        if (!dd || dd >= radius) return {x: d.x, y: d.y, z: dd >= radius ? 1 : 10};\n        var k = k0 * (1 - Math.exp(-dd * k1)) / dd * .75 + .25;\n        return {\n          x: (focus[0] + dx * k),\n          y: (focus[1] + dy * k),\n          z: Math.min(k, 10)\n        };\n      }\n\n      function rescale() {\n        k0 = Math.exp(distortion);\n        k0 = k0 / (k0 - 1) * radius;\n        k1 = distortion / radius;\n        return fisheye;\n      }\n\n      fisheye.radius = function(_) {\n        if (!arguments.length) return radius;\n        radius = +_;\n        return rescale();\n      };\n\n      fisheye.distortion = function(_) {\n        if (!arguments.length) return distortion;\n        distortion = +_;\n        return rescale();\n      };\n\n      fisheye.focus = function(_) {\n        if (!arguments.length) return focus;\n        focus = _;\n        return fisheye;\n      };\n\n      return rescale();\n    }\n  };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/Fisheye.js\n// module id = 1\n// module chunks = 0","\n\nmodule.exports = {\n  en: {\n    loading: 'Please wait, loading images…',\n    what: 'What\\'s this?',\n    hidehidemebuttoncopy: 'OK',\n    description: 'This page gives you a map of the entire collection. Artworks have been grouped by similarity. It works like a map so you can zoom in to look at single works. \\\n      <h2>What am I looking at?</h2> \\\n      <p>\\\n      We trained an algorithm to identify similarities between works and built an interface to display how it groups the images. We hope it helps you in finding new ways of exploring and seeing the collections.\\\n      </p><p>\\\n      The project received support from <a href=\"http://www.kulturradet.no/english\">The Arts Council Norway</a> and is a collaboration between the Section for Digital Collection Management at the National Museum, <a href=\"http://www.auduno.com/\">Audun Mathias Øygard</a> and <a href=\"http://bengler.no\">Bengler</a>.\\\n      </p><p>\\\n      <a href=\"https://github.com/bengler/propinquity\">GitHub</a>\\\n      </p>\\\n      '\n  },\n  no: {\n    loading: 'Vennligst vent, bildene laster…',\n    hidehidemebuttoncopy: 'Greit',\n    what: 'Hva er dette?',\n    description: 'Her får du utsikt over hele samlingen i ett bilde. Vi har gruppert kunst med likhetstrekk og lar deg se samlingen fugleperspektiv. Samtidig kan du zoome inn på detaljer i enkeltverk hvis du ønsker. \\\n      <h2>Hva er dette?</h2> \\\n      Vi spurte oss selv: kan vi trene opp en algoritme til å se likheter i samlingen vår og bruke det til å gi bedre oversikt? \\\n      \\\n      Ved hjelp av maskinlæring viser vi her algoritmens klassifisering av bildene våre etter likheter i motiv og stil. Vi håper dere vil ha nytte av en ny innfallsvinkel til kunsten på nettsidene våre og at visningen oppfordrer publikum til nye oppdagelsesferder i samlingene.\\\n      \\\n      Prosjektet er støttet av <a href=\"\">Norsk kulturråd</> og utført av seksjon Digital Samlingsforvaltning på Nasjonalmuseet i samarbeid med <a href=\"http://www.auduno.com/\">Audun Mathias Øygard</a> og <a href=\"http://bengler.no\">Bengler</a>. Tematisk ligger arbeidet mellom konvensjonell kunsthistorietenkning og robotikk: to teoretiske retninger som tradisjonelt sett ligger langt fra hverandre.'\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/languageStrings.js\n// module id = 2\n// module chunks = 0","/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function () {\n\n\t\t\treturn _tweens;\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\t_tweens = [];\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\t_tweens.push(tween);\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n})();\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.performance.now.bind(window.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\n\t};\n\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tween.js/src/Tween.js\n// module id = 3\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 4\n// module chunks = 0","var TWEEN = require(\"tween.js\")\n\nvar Fisheye = require('./Fisheye')\nvar detector = require('./Detector')\n\nvar languageStrings = require('./languageStrings')\n\nvar container, stats;\n\nvar camera, scene, renderer;\n\nvar raycaster, mouse;\n\nvar controls;\n\nvar mesh, singleGeometry;\n\nvar pos;\n\nvar currentIntersectFace = -1;\n\nvar tileSize;\n\nvar fisheye;\n\nvar mouse_down_init_position;\n\nvar numberWorks = 0;\n\nvar numTextures, textureLoader, jpgTextureLoader;\n\nvar autoPanVec = -1;\nvar autoPanStart = 0.55;\nvar autoPanStop = 0.99;\n\nvar firstRender = true;\n\nvar autoZoomed = false;\n\nvar hiResTexture;\n\nvar isTouch = true;\nvar touchMove = false;\n\nTHREE.ImageUtils.crossOrigin = '';\n\nvar z_scaler = 20;\n\nvar collectionWidth, collectionHeight;\n\nvar dataPath;\n\nvar minX = minY = Infinity;\nvar maxX = maxY = -Infinity;\n\nvar minTouchDist, minFisheyeDist;\n\nvar maxFisheyeZ;\n\nvar textureFormat;\n\nvar isCanvas = false;\n\nvar workMarker, workMarkerPosition;\nvar markedWork = -1;\n\nvar language = 'en'\n\nvar textureLoaders = {\n  's3tc' : THREE.DDSLoader,\n  'pvrtc' : THREE.PVRLoader,\n  //'etc1' : THREE.DDSLoader,\n  'jpg' : THREE.TextureLoader\n}\n\nfunction init() {\n\n  container = document.getElementById( 'container' );\n\n  if ( Detector.webgl ) {\n    renderer = new THREE.WebGLRenderer( { antialias: false, alpha : true, logarithmicDepthBuffer: true  } );\n    var availableExtensions = renderer.context.getSupportedExtensions();\n\n    // If it works with VRAM constraints, prefer jpg for over-the-wire savings\n    textureFormat = \"jpg\";\n\n    // if (availableExtensions.indexOf(\"WEBGL_compressed_texture_s3tc\") > -1) textureFormat = \"s3tc\";\n    // else if (availableExtensions.indexOf(\"WEBGL_compressed_texture_pvrtc\") > -1 || availableExtensions.indexOf(\"WEBKIT_WEBGL_compressed_texture_pvrtc\") > -1) textureFormat = \"pvrtc\";\n    //else if (availableExtensions.indexOf(\"WEBGL_compressed_texture_etc1\") > -1) textureFormat = \"etc1\";\n    // else textureFormat = \"jpg\";\n  } else {\n    renderer = new THREE.CanvasRenderer( { antialias: false, alpha : true } );\n    textureFormat = \"jpg\";\n    isCanvas = true;\n    mosaics = canvas_mosaics;\n  }\n  renderer.setClearColor( 0x333333 );\n  renderer.setPixelRatio( window.devicePixelRatio );\n  renderer.setSize( window.innerWidth, window.innerHeight );\n\n  container.appendChild( renderer.domElement );\n\n  for (var i = 0;i < mosaics.length;i++) {\n    numberWorks += mosaics[i][\"tiles\"];\n  }\n\n  var xCoords = collection.map(function(e){return e.embedding_x});\n  var yCoords = collection.map(function(e){return e.embedding_y});\n  xCoords.sort(function (a,b) {return a-b;});\n  yCoords.sort(function (a,b) {return a-b;});\n  var lowPercentile = Math.floor(numberWorks*0.01);\n  var hiPercentile = Math.floor(numberWorks*0.99);\n  collectionWidth = (xCoords[hiPercentile]-xCoords[lowPercentile])*1.1;\n  collectionHeight = (yCoords[hiPercentile]-yCoords[lowPercentile])*1.1;\n  maxX = xCoords[numberWorks-1];\n  minX = xCoords[0];\n  maxY = yCoords[numberWorks-1];\n  minY = yCoords[0];\n\n  // set tilesize so that images approximately cover entire map\n  tileSize = Math.sqrt( Math.PI*Math.pow((collectionWidth+collectionHeight)/4,2) / numberWorks );\n\n  var feD = 5;\n  var feR = tileSize*10;\n  fisheye = Fisheye.circular().radius(feR).distortion(feD);\n\n  // calculate the maximum z-height of works distorted by fisheye\n  var k0 = Math.exp(feD) / (Math.exp(feD) - 1) * feR;\n  maxFisheyeZ = (k0 * (1 - Math.exp(-0.001 * feD/feR)) / 0.001 * .75 + .25) * z_scaler;\n\n  // calculate needed fov to fit all works in view\n  var fov = calcNeededFov(collectionWidth, collectionHeight);\n\n  // calculate maximum zoom\n  var aspect = window.innerWidth / window.innerHeight;\n  var perspectiveScale = tileSize / Math.tan( 0.5*fov*Math.PI/180 );\n  perspectiveScale = aspect > 1 ? perspectiveScale : (perspectiveScale/aspect);\n  minTouchDist = z_scaler + 0.564 * perspectiveScale;\n  minFisheyeDist = maxFisheyeZ + 2.336 * perspectiveScale;\n\n  //\n\n  camera = new THREE.PerspectiveCamera( fov, window.innerWidth / window.innerHeight, 10, 3500 );\n  camera.position.z = 2000;\n  scene = new THREE.Scene();\n\n  //\n\n  // mark work if specified in url\n  if (lookupWork(queryStrings['id']) !== undefined) {\n    markedWork = lookupWork(queryStrings['id']);\n    workMarkerPosition = new THREE.Vector3(collection[markedWork]['embedding_x'],collection[markedWork]['embedding_y'],z_scaler + 2.);\n  }\n\n  // create geometry and merge into one geometry\n  singleGeometry = new THREE.Geometry();\n  for (var i = 0;i < numberWorks;i++) {\n    var area = collection[i]['image_width']*collection[i]['image_height'];\n    var scaling = tileSize / Math.sqrt(area);\n    collection[i]['draw_width'] = collection[i]['image_width']*scaling;\n    collection[i]['draw_height'] = collection[i]['image_height']*scaling;\n\n    var plane = new THREE.PlaneGeometry( collection[i]['draw_width'], collection[i]['draw_height'] );\n    var planeMesh = new THREE.Mesh(plane);\n    planeMesh.position.x = collection[i]['embedding_x'];\n    planeMesh.position.y = collection[i]['embedding_y'];\n    if (markedWork == i) {\n      planeMesh.position.z = z_scaler + 2.1;\n    } else {\n      planeMesh.position.z = z_scaler + i*0.0001;\n    }\n    planeMesh.updateMatrix();\n    singleGeometry.merge(planeMesh.geometry, planeMesh.matrix);\n  }\n\n  var loadGeometry = function() {\n    var materials = [];\n    var totalVertices = 0;\n    for (var i = 0;i < numTextures;i++) {\n      // set up mapping from textures to geometry\n      var mw = mosaics[i].mosaicWidth;\n      var tSize = mosaics[i].tileSize;\n      var pDim = mosaics[i].pixelWidth;\n      for (var j = 0;j < mosaics[i].tiles;j++) {\n        var left = ((j % mw)*tSize)/pDim;\n        var upper = (Math.floor(j / mw)*tSize)/pDim;\n        var right = left + tSize/pDim;\n        var lower = upper + tSize/pDim;\n        if (isCanvas) {\n          upper = 1-upper;\n          lower = 1-lower;\n        }\n        var coords = [\n          new THREE.Vector2(left,upper),\n          new THREE.Vector2(left,lower),\n          new THREE.Vector2(right,lower),\n          new THREE.Vector2(right,upper),\n        ];\n        singleGeometry.faceVertexUvs[0][totalVertices*2] = [ coords[0], coords[1], coords[3] ];\n        singleGeometry.faceVertexUvs[0][(totalVertices*2) + 1] = [ coords[1], coords[2], coords[3] ];\n        singleGeometry.faces[totalVertices * 2].materialIndex = i;\n        singleGeometry.faces[(totalVertices*2) + 1].materialIndex = i;\n        totalVertices += 1;\n      }\n\n      materials[i] = new THREE.MeshBasicMaterial({ map : textures[i], overdraw : true });\n    }\n    materials[numTextures] = new THREE.MeshBasicMaterial({ overdraw : true });\n    var multimaterial = new THREE.MultiMaterial(materials);\n    singleGeometry = new THREE.BufferGeometry().fromGeometry(singleGeometry);\n\n    // marker of image\n    if (lookupWork(queryStrings['id']) !== undefined) {\n      var workMarkerMaterial = new THREE.MeshBasicMaterial({ color : 0xffffee, transparent : true, opacity: 0.3 ,overdraw : true });\n      var workMarkerGeom = new THREE.CircleGeometry( 1*Math.sqrt(1*tileSize*tileSize), 32 );\n      workMarker = new THREE.Mesh( workMarkerGeom, workMarkerMaterial );\n      workMarker.position.set(workMarkerPosition.x, workMarkerPosition.y, workMarkerPosition.z);\n      scene.add(workMarker);\n    }\n\n    mesh = new THREE.Mesh(singleGeometry, multimaterial);\n    scene.add(mesh);\n\n    animate();\n  }\n\n  var texturesLoaded = 0;\n  numTextures = mosaics.length;\n  var textures = [];\n  jpgTextureLoader = new textureLoaders['jpg']();\n  textureLoader = new textureLoaders[textureFormat]();\n  for (var i = 0;i < numTextures;i++) {\n    var texture = textureLoader.load(\n      dataPath + mosaics[i].image[textureFormat],\n      function(texture) {\n        texture.flipY = false;\n        texturesLoaded += 1;\n        if (texturesLoaded == numTextures) loadGeometry();\n      }\n    )\n    textures[i] = texture;\n  }\n\n  //\n\n  raycaster = new THREE.Raycaster();\n\n  mouse = new THREE.Vector2();\n\n  //\n\n  controls = new THREE.TrackballControls( camera );\n  controls.minDistance = minTouchDist;\n  controls.maxDistance = 2200;\n  controls.noRotate = true;\n  controls.noMouseZoom = true;\n  controls.panSpeed = 0.5;\n  controls.staticMoving = true;\n  controls.enabled = false;\n  controls.maxPanX = maxX;\n  controls.minPanX = minX;\n  controls.maxPanY = maxY;\n  controls.minPanY = minY;\n  controls.unprojectZ = z_scaler;\n\n  //\n\n  /*stats = new Stats();\n  stats.domElement.style.position = 'absolute';\n  stats.domElement.style.top = '0px';\n  container.appendChild( stats.domElement );*/\n\n  //\n\n  window.addEventListener( 'resize', onWindowResize, false );\n}\n\nfunction onWebGLMouseDown( event ) {\n  mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  mouse_down_init_position = [mouse.x, mouse.y];\n}\n\nfunction onWebGLMouseUp( event ) {\n  autoZoomed = false;\n\n  var x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  var y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  var old_x = mouse_down_init_position[0];\n  var old_y = mouse_down_init_position[1];\n  var distance = Math.sqrt((x-old_x)*(x-old_x) + (y-old_y)*(y-old_y));\n  if (currentIntersectFace >= 0 && distance < 0.01) {\n    var work_id = collection[currentIntersectFace].identifier;\n    var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n    window.open(work_url, '_blank');\n  }\n}\n\nfunction onWindowResize() {\n\n  camera.fov = calcNeededFov(collectionWidth, collectionHeight);\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n\n  renderer.setSize( window.innerWidth, window.innerHeight );\n\n  controls.handleResize();\n\n}\n\nfunction onMouseOut( event ) {\n  autoPanVec = -1;\n}\n\nfunction onDocumentMouseMove( event ) {\n  event.preventDefault();\n\n  if (isTouch) {\n    isTouch = false;\n    controls.unprojectZ = maxFisheyeZ;\n    controls.minDistance =  minFisheyeDist;\n  }\n\n  // Don't update when panning\n  if (controls.ismousedown) {\n    autoPanVec = -1;\n    return;\n  }\n\n  mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n\n  autoPan(mouse)\n\n  // Autopan forces fisheye update every frame anyway\n  if (autoPanVec != -1) return;\n\n  recalculateFishEye(mouse)\n}\n\nfunction recalculateFishEye(coords) {\n\n  var vector = new THREE.Vector3();\n  vector.set(coords.x, coords.y, 1)\n  vector.unproject( camera );\n\n  var dir = vector.sub( camera.position ).normalize();\n  var distance = (maxFisheyeZ - camera.position.z) / dir.z;\n\n  coords = camera.position.clone().add( dir.multiplyScalar( distance ) );\n\n  fisheye.focus([coords.x,coords.y]);\n\n  for (var i = 0;i < collection.length;i++) {\n    var x_coords = collection[i]['embedding_x'];\n    var y_coords = collection[i]['embedding_y'];\n    var fisheye_trans = fisheye({x: x_coords, y: y_coords});\n\n    var x_size = collection[i]['draw_width']/2\n    var y_size = collection[i]['draw_height']/2\n    var x_offset = x_size+((fisheye_trans.z-1)*0.7*x_size);\n    var y_offset = y_size+((fisheye_trans.z-1)*0.7*y_size);\n    var x_pos = fisheye_trans.x;\n    var y_pos = fisheye_trans.y;\n    if (markedWork == i) {\n      var z_pos = fisheye_trans.z*z_scaler + 2.1;\n    } else {\n      var z_pos = fisheye_trans.z*z_scaler + i*0.0001;\n    }\n    singleGeometry.attributes.position.setXYZ((i*6)  , x_pos-x_offset, y_pos+y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+1, x_pos-x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+2, x_pos+x_offset, y_pos+y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+3, x_pos-x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+4, x_pos+x_offset, y_pos-y_offset, z_pos);\n    singleGeometry.attributes.position.setXYZ((i*6)+5, x_pos+x_offset, y_pos+y_offset, z_pos);\n  }\n  singleGeometry.attributes.position.needsUpdate = true;\n\n  if (markedWork >= 0) {\n    // recalculate position and size of marker\n    var fisheye_trans = fisheye({x : workMarkerPosition.x, y : workMarkerPosition.y});\n    var x_size = tileSize/2;\n    var x_offset = x_size+((fisheye_trans.z-1)*0.7*x_size);\n    workMarker.scale.x = x_offset/x_size;\n    workMarker.scale.y = x_offset/x_size;\n    workMarker.position.x = fisheye_trans.x;\n    workMarker.position.y = fisheye_trans.y;\n    workMarker.position.z = fisheye_trans.z*z_scaler + 2.;\n  }\n}\n\n\nfunction autoPan(mouse) {\n\n  var mouseVec = new THREE.Vector3(mouse.x, mouse.y, 0)\n  var mouseVecLength = mouseVec.length()\n  if (mouseVecLength > autoPanStart && mouseVecLength < autoPanStop) {\n    autoPanVec = mouseVec\n  } else {\n    autoPanVec = -1\n  }\n}\n\nfunction onTouchStart( event ) {\n  if (!isTouch) {\n    isTouch = true;\n    controls.minDistance = minTouchDist;\n    controls.unprojectZ = z_scaler;\n  }\n}\n\nfunction onTouchMove( event ) {\n  touchMove = true;\n}\n\nfunction onTouchEnd( event ) {\n  event.preventDefault();\n\n  mouse.x = ( event.changedTouches[ 0 ].pageX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.changedTouches[ 0 ].pageY / window.innerHeight ) * 2 + 1;\n\n  var previousFace = currentIntersectFace;\n  if (!touchMove) {\n    updateTileInfo();\n    if (currentIntersectFace >= 0) {\n      var work_id = collection[currentIntersectFace].identifier;\n      var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n      if (currentIntersectFace == previousFace && !autoZoomed) {\n        window.open(work_url, '_blank');\n      }\n      var metadata = collection[currentIntersectFace];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <a href='\"+work_url+\n        \"' target='_blank'><em>\"+metadata.title+\"</em></a></strong>. \"+metadata.yearstring+\".</p>\";\n    }\n  }\n  if (autoZoomed) autoZoomed = false;\n  touchMove = false;\n}\n\nfunction onLinkTouchEnd( event ) {\n  event.preventDefault();\n  event.stopPropagation();\n  if (currentIntersectFace >= 0) {\n    var work_id = collection[currentIntersectFace].identifier;\n    var work_url = \"http://samling.nasjonalmuseet.no/no/object/\"+work_id.replace(\"&\",\"_\");\n    window.open(work_url, '_blank');\n  }\n}\n\n\nfunction animate() {\n\n  if (autoPanVec != -1 && !controls.ismousedown) {\n    var temp = autoPanVec.clone();\n\n    var scaledVec = (Math.min(temp.length(), autoPanStop) - autoPanStart) / (autoPanStop - autoPanStart)\n    var speed = Math.sin(scaledVec * Math.PI) * 1.5\n\n    temp.x *= speed;\n    temp.y *= speed;\n    var new_x = controls.target.x + autoPanVec.x;\n    var new_y = controls.target.y + autoPanVec.y;\n    if (autoPanVec.x < 0 && new_x < minX) temp.x = 0;\n    if (autoPanVec.x > 0 && new_x > maxX) temp.x = 0;\n    if (autoPanVec.y < 0 && new_y < minY) temp.y = 0;\n    if (autoPanVec.y > 0 && new_y > maxY) temp.y = 0;\n    camera.position.addVectors(camera.position, temp);\n    controls.target.addVectors(controls.target, temp);\n    var mouse = {\n      x: autoPanVec.x,\n      y: autoPanVec.y\n    }\n    recalculateFishEye(mouse)\n  }\n\n  requestAnimationFrame( animate );\n  controls.update();\n\n  render();\n\n  //stats.update();\n  TWEEN.update();\n\n}\n\nfunction updateTileInfo() {\n\n  // check if pointer interacts with tile\n  raycaster.setFromCamera( mouse, camera );\n  var intersects = raycaster.intersectObject( mesh );\n\n  // updates on entering/leaving tiles\n\n  if ( intersects.length > 0 ) {\n    var face_index = Math.floor(intersects[0].face.a/6);\n\n    if (currentIntersectFace == -1) {\n      // entering tile\n      var metadata = collection[face_index];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <em>\"+metadata.title+\"</em></strong>. \"+metadata.yearstring+\".</p>\";\n      document.getElementById(\"imageinfo\").style.display = \"block\";\n      document.getElementById(\"container\").setAttribute(\"class\",\"clickable\");\n      currentIntersectFace = face_index;\n      if ( isTouch ) {\n        // raise selected tile\n        for (var i = 0;i < 6;i++) {\n          singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) + 2.0);\n        }\n        singleGeometry.attributes.position.needsUpdate = true;\n      }\n      // set timeout to avoid queuing lots of images on panning\n      setTimeout(function() {if (currentIntersectFace == face_index) getHighResImage(face_index);}, 100);\n    } else if (face_index != currentIntersectFace) {\n      // entering tile, leaving previous tile\n      var metadata = collection[face_index];\n      document.getElementById(\"imageinfo\").innerHTML = \"<p><strong>\"+metadata.artist+\", <em>\"+metadata.title+\"</em></strong>. \"+metadata.yearstring+\".</p>\";\n      removeHighResImage(currentIntersectFace);\n      if ( isTouch ) {\n        // lower previous selected tile and raise new selected tile\n        for (var i = 0;i < 6;i++) {\n          singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) - 2.0);\n          singleGeometry.attributes.position.setZ((face_index*6)+i, singleGeometry.attributes.position.getZ((face_index*6)+i) + 2.0);\n        }\n        singleGeometry.attributes.position.needsUpdate = true;\n      }\n      currentIntersectFace = face_index;\n      // set timeout to avoid queuing lots of images on panning\n      setTimeout(function() {if (currentIntersectFace == face_index) getHighResImage(face_index);}, 100);\n    }\n  } else if (currentIntersectFace != -1) {\n    // leaving tile\n    if ( isTouch ) {\n      // lower previous selected tile\n      for (var i = 0;i < 6;i++) {\n        singleGeometry.attributes.position.setZ((currentIntersectFace*6)+i, singleGeometry.attributes.position.getZ((currentIntersectFace*6)+i) - 2.0);\n      }\n      singleGeometry.attributes.position.needsUpdate = true;\n    }\n    removeHighResImage(currentIntersectFace);\n    currentIntersectFace = -1;\n    document.getElementById(\"imageinfo\").style.display = \"none\";\n    document.getElementById(\"container\").setAttribute(\"class\",\"\");\n  }\n}\n\nfunction render() {\n\n  if (!isTouch) {\n    updateTileInfo();\n  }\n\n  renderer.render( scene, camera );\n\n  if (firstRender) {\n    document.getElementById(\"message\").style.display = \"none\";\n    renderer.domElement.addEventListener( 'mousemove', onDocumentMouseMove, false );\n    document.addEventListener( 'mousewheel', onMouseWheel, false);\n    document.addEventListener( 'DOMMouseScroll', onMouseWheel, false); // for firefox\n    document.addEventListener( 'touchstart', onTouchStart, false);\n    renderer.domElement.addEventListener( 'touchmove', onTouchMove, false);\n    document.addEventListener( 'touchcancel', onTouchEnd, false);\n    renderer.domElement.addEventListener( 'touchend', onTouchEnd, false);\n    document.addEventListener( 'mouseout', onMouseOut, false);\n    renderer.domElement.addEventListener( 'mousedown', onWebGLMouseDown, false);\n    renderer.domElement.addEventListener( 'mouseup', onWebGLMouseUp, false);\n    document.getElementById(\"imageinfo\").addEventListener( 'touchend', onLinkTouchEnd, false);\n    document.getElementById(\"ui_zoom_in\").addEventListener(\"click\", onUIZoomIn, false);\n    document.getElementById(\"ui_zoom_in\").addEventListener(\"touchend\", onUIZoomIn, false);\n    document.getElementById(\"ui_zoom_out\").addEventListener(\"click\", onUIZoomOut, false);\n    document.getElementById(\"ui_zoom_out\").addEventListener(\"touchend\", onUIZoomOut, false);\n    document.getElementById(\"ui_reset\").addEventListener(\"click\", onUIReset, false);\n    document.getElementById(\"ui_reset\").addEventListener(\"touchend\", onUIReset, false);\n    controls.enabled = true;\n    localStorage.setItem('propinquity', 'true');\n\n    // zoom towards specific work if specified in url\n    if (queryStrings['id'] !== undefined) {\n      var workIndex = lookupWork(queryStrings['id']);\n      var workCoords = [collection[workIndex].embedding_x, collection[workIndex].embedding_y];\n      if (workCoords !== undefined) {\n        autoZoom(workCoords);\n        // lock focus until user clicks/touches\n        autoZoomed = true;\n      }\n    }\n\n    firstRender = false;\n  }\n\n}\n\nfunction getHighResImage(index) {\n  var index_str = \"\" + collection[index]['sequence_id'];\n  var image_filename = \"0000\".substring(0, 4 - index_str.length) + index_str;\n  hiResTexture = jpgTextureLoader.load(\n    'https://mm.dimu.org/image/'+collection[index]['image_id']+'?dimension=400x400',\n    //'/data/painting/images/'+image_filename+\".jpg\",\n    function (texture) {\n      if (currentIntersectFace == index) {\n        // update texture\n        mesh.material.materials[numTextures].map = texture;\n        mesh.material.materials[numTextures].needsUpdate = true;\n        mesh.material.needsUpdate = true;\n\n        // map each painting to geometry and position\n        mesh.geometry.attributes.uv.setXY((index*6)  , 0., 1.);\n        mesh.geometry.attributes.uv.setXY((index*6)+1, 0., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+2, 1., 1.);\n        mesh.geometry.attributes.uv.setXY((index*6)+3, 0., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+4, 1., 0.);\n        mesh.geometry.attributes.uv.setXY((index*6)+5, 1., 1.);\n        mesh.geometry.attributes.uv.needsUpdate = true;\n\n        var mosaicIndex = Math.floor(index / mosaics[0].tiles);\n        mesh.geometry.clearGroups();\n        var mosaicStart = 0;\n        for (var i = 0;i < numTextures;i++) {\n          if (i == mosaicIndex) {\n            var splitLength = index-mosaicStart;\n            mesh.geometry.addGroup(mosaicStart*6, splitLength*6, i);\n            mesh.geometry.addGroup(index*6, 1*6, numTextures);\n            mesh.geometry.addGroup((mosaicStart+splitLength+1)*6, (mosaics[i].tiles-splitLength-1)*6, i);\n          } else {\n            mesh.geometry.addGroup(mosaicStart*6, mosaics[i].tiles*6, i);\n          }\n          mosaicStart += mosaics[i].tiles;\n        }\n        mesh.geometry.groupsNeedUpdate = true;\n\n      }\n    }\n  );\n}\n\nfunction removeHighResImage(index) {\n  highResImageIndex = -1;\n  var mosaicIndex = Math.floor(index / mosaics[0].tiles);\n  var i = index % mosaics[0].tiles;\n  var mw = mosaics[mosaicIndex].mosaicWidth;\n  var tSize = mosaics[mosaicIndex].tileSize;\n  var pDim = mosaics[mosaicIndex].pixelWidth;\n\n  var left = ((i % mw)*tSize)/pDim;\n  var upper = (Math.floor(i / mw)*tSize)/pDim;\n  var right = left + tSize/pDim;\n  var lower = upper + tSize/pDim;\n  if (isCanvas) {\n    upper = 1-upper;\n    lower = 1-lower;\n  }\n\n  mesh.geometry.clearGroups();\n  var mosaicStart = 0\n  for (var i = 0;i < mosaics.length;i++) {\n    mesh.geometry.addGroup(mosaicStart*6, mosaics[i].tiles*6, i);\n    mosaicStart += mosaics[i].tiles;\n  }\n  mesh.geometry.groupsNeedUpdate = true;\n\n  mesh.geometry.attributes.uv.setXY((index*6)  , left, upper);\n  mesh.geometry.attributes.uv.setXY((index*6)+1, left, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+2, right, upper);\n  mesh.geometry.attributes.uv.setXY((index*6)+3, left, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+4, right, lower);\n  mesh.geometry.attributes.uv.setXY((index*6)+5, right, upper);\n  mesh.geometry.attributes.uv.needsUpdate = true;\n\n  if (hiResTexture) {\n    hiResTexture.dispose();\n  }\n}\n\nfunction onMouseWheel(event) {\n  var factor = 0.02;\n\n  var mX = ( event.clientX / window.innerWidth ) * 2 - 1;\n  var mY = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  var vector = new THREE.Vector3(mX, mY, 1 );\n\n  vector.unproject(camera); // gives us the true coordinates of the point\n  vector.sub(camera.position);\n  var move = vector.setLength(camera.position.length()*factor);\n  if (event.deltaY < 0 || event.detail < 0) {\n    if ((move.z + camera.position.z) < controls.minDistance) {\n      move.z = controls.minDistance - camera.position.z;\n    }\n    if (move.z < 0) {\n      camera.position.addVectors(camera.position, move);\n      move.z = 0;\n      controls.target.addVectors(controls.target, move);\n    }\n  } else {\n    if ((camera.position.z - move.z) > controls.maxDistance) {\n      move.z = camera.position.z - controls.maxDistance;\n    }\n    if (move.z < 0) {\n      camera.position.subVectors(camera.position, move);\n      move.z = 0;\n      controls.target.subVectors(controls.target, move);\n    }\n  }\n\n}\n\nfunction onUIZoomIn(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.zoomIn();\n}\n\nfunction onUIZoomOut(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.zoomOut();\n}\n\nfunction onUIReset(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  controls.reset();\n}\n\nvar queryStrings = (function(a) {\n  if (a == \"\") return {};\n  var b = {};\n  for (var i = 0; i < a.length; ++i)\n  {\n    var p=a[i].split('=', 2);\n    if (p.length == 1)\n      b[p[0]] = \"\";\n    else\n      b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n  }\n  return b;\n})(window.location.search.substr(1).split('&'));\n\nfunction lookupWork(id) {\n  for (var i = 0;i < collection.length;i++) {\n    if (collection[i].identifier == id) {\n      return i;\n    }\n  }\n}\n\nvar autoZoom = function(coords) {\n  var tweenVars = camera.position.clone();\n  tweenVars.factor = 0;\n  var tween = new TWEEN.Tween(tweenVars)\n    .to({x : coords[0], y: coords[1], z : 320, factor : 1}, 1500)\n    .onUpdate(function() {\n      camera.position.x = this.x;\n      camera.position.y = this.y;\n      camera.position.z = this.z;\n      controls.target = new THREE.Vector3(this.x, this.y, 0);\n    })\n    .onComplete(function() {\n      // select work\n      mouse.x = 0;\n      mouse.y = 0;\n      updateTileInfo();\n    })\n  tween.easing(TWEEN.Easing.Exponential.InOut);\n  tween.delay(200);\n  tween.start();\n}\n\nfunction calcNeededFov(width, height) {\n  var dist = 2000;\n  var aspect = window.innerWidth / window.innerHeight;\n  var widthfov = 2 * Math.atan( ( width*1.1 / aspect ) / ( 2 * dist ) ) * ( 180 / Math.PI )\n  var heightfov = 2 * Math.atan( height*1.1 / ( 2 * dist ) ) * ( 180 / Math.PI );\n  var fov = (widthfov > heightfov) ? widthfov : heightfov;\n  return fov\n}\n\nfunction loadScripts(url, onSuccess) {\n  var el = document.createElement('script');\n  el.src = url;\n  el.onload = onSuccess;\n  document.body.appendChild(el);\n}\n\n// load collection and initialize\nif (queryStrings['collection'] !== undefined) {\n  dataPath = './data/'+queryStrings['collection']+'/';\n} else {\n  dataPath = './data/painting_subject/';\n}\nloadScripts(dataPath+'collection.js',init);\n\npreferredLanguage = navigator.languages\n    ? navigator.languages[0]\n    : (navigator.language || navigator.userLanguage)\n\nif (queryStrings['lang'] == 'no' || preferredLanguage == 'nb_NO' || preferredLanguage == 'nn_NO') {\n  language = 'no'\n}\n\ndocument.getElementById(\"message\").innerHTML = languageStrings[language].loading;\ndocument.getElementById(\"moreinfo\").innerHTML = languageStrings[language].description;\ndocument.getElementById(\"moreinfolink\").innerHTML = languageStrings[language].what;\ndocument.getElementById(\"hidemebutton\").innerHTML = languageStrings[language].hidehidemebuttoncopy;\n\nfunction showInfo() {\n  var el = document.getElementById(\"moreinfocontainer\");\n  el.style.display = 'block';\n  el.classList.add('showing');\n}\n\nif (true || localStorage.getItem(\"propinquity\") == undefined) {\n  showInfo();\n}\n\ndocument.getElementById(\"moreinfolink\").addEventListener(\"click\", function(even) {\n  showInfo();\n})\n\ndocument.getElementById(\"hidemebutton\").addEventListener(\"click\", function(event) {\n  var el = document.getElementById(\"moreinfocontainer\");\n  el.style.display = 'none';\n  el.classList.remove('showing');\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/js/main.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}